<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Study Planner PRO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      :root {
        --bg-dark: #0f172a;
        --card-dark: rgba(255, 255, 255, 0.08);
        --border-dark: rgba(255, 255, 255, 0.15);
        --text-dark: #e5e7eb;
        --muted-dark: #94a3b8;

        --bg-light: #f3f4f6;
        --card-light: rgba(255, 255, 255, 0.95);
        --border-light: rgba(0, 0, 0, 0.1);
        --text-light: #111827;
        --muted-light: #6b7280;

        --accent: #22c55e;
        --danger: #ef4444;
        --hover: #2563eb;
        --scroll-bg: rgba(255, 255, 255, 0.1);
        --scroll-thumb: rgba(255, 255, 255, 0.3);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: system-ui, sans-serif;
      }
      html,
      body {
        height: 100%;
      }

      /* Body scrollable */
      body {
        background: linear-gradient(135deg, #020617, #0f172a);
        color: #e5e7eb;
        transition: background 0.3s, color 0.3s;
        display: flex;
        justify-content: center;
        padding: 20px;
        flex-direction: column;
        align-items: center;
        overflow-y: auto;
      }

      /* Flowers */
      .flower {
        position: fixed;
        top: -40px;
        animation: fall linear infinite;
        opacity: 0.8;
        pointer-events: none;
      }
      @keyframes fall {
        from {
          transform: translateY(-50px) rotate(0deg);
        }
        to {
          transform: translateY(110vh) rotate(360deg);
        }
      }

      /* App Card */
      .app {
        width: 100%;
        max-width: 480px;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        margin: 20px 0;
        transition: background 0.3s, color 0.3s, border 0.3s;
        position: relative;
      }
      h1 {
        text-align: center;
        margin-bottom: 4px;
        font-size: 26px;
      }
      .subtitle {
        text-align: center;
        margin-bottom: 20px;
        font-size: 14px;
        color: var(--muted-dark);
      }

      /* Inputs & Buttons */
      .input-row {
        display: flex;
        gap: 10px;
        margin-bottom: 12px;
      }
      input {
        flex: 1;
        padding: 12px;
        border-radius: 12px;
        border: 1px solid;
        outline: none;
        font-size: 14px;
        transition: background 0.3s, color 0.3s, border 0.3s;
      }
      button {
        padding: 12px 16px;
        border-radius: 12px;
        border: none;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s, background 0.3s, color 0.3s;
      }
      button:hover {
        transform: scale(1.05);
      }

      /* Lists */
      ul {
        list-style: none;
        padding-right: 4px;
        margin-top: 10px;
      }
      ul::-webkit-scrollbar {
        width: 8px;
      }
      ul::-webkit-scrollbar-track {
        background: var(--scroll-bg);
        border-radius: 4px;
      }
      ul::-webkit-scrollbar-thumb {
        background: var(--scroll-thumb);
        border-radius: 4px;
      }
      ul::-webkit-scrollbar-thumb:hover {
        background: var(--hover);
      }

      li {
        border-radius: 14px;
        padding: 12px;
        margin-bottom: 10px;
        animation: slide 0.3s ease;
        display: flex;
        flex-direction: column;
      }
      @keyframes slide {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .task-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .subject {
        font-size: 11px;
        color: #38bdf8;
      }
      .timer {
        font-size: 13px;
        margin-top: 6px;
        color: #a7f3d0;
      }
      .actions button {
        padding: 6px 10px;
        font-size: 12px;
        margin-left: 6px;
      }
      .start {
        background: var(--accent);
        color: #022c22;
      }
      .pause {
        background: var(--danger);
        color: #fff;
      }
      .delete {
        background: var(--danger);
        color: #fff;
      }
      .footer {
        text-align: center;
        margin-top: 14px;
        font-size: 12px;
      }

      /* Dropdown */
      .dropdown {
        position: relative;
        flex: 1;
      }
      .dropdown input {
        cursor: pointer;
      }
      .dropdown-list {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        border-radius: 10px;
        max-height: 0;
        overflow-y: auto;
        transition: max-height 0.3s ease, opacity 0.3s ease;
        opacity: 0;
        z-index: 5;
        padding: 0;
      }
      .dropdown-list.show {
        max-height: 200px;
        opacity: 1;
      }
      .dropdown-list div {
        padding: 8px 12px;
        cursor: pointer;
        transition: 0.2s;
      }
      .dropdown-list div:hover {
        background: var(--hover);
        border-radius: 8px;
      }

      /* Theme Select */
      .theme-select {
        position: absolute;
        top: 20px;
        right: 20px;
        padding: 6px 12px;
        border-radius: 10px;
        border: 1px solid;
        background: inherit;
        color: inherit;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .theme-select:hover {
        background: var(--hover);
        color: #fff;
      }

      /* Resource Section */
      .resource-section {
        margin-top: 20px;
      }
      .resource-section h2 {
        font-size: 18px;
        margin-bottom: 10px;
        text-align: center;
      }
      .resource-list li {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        padding: 6px 10px;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.1);
      }
      .resource-list li button {
        padding: 4px 6px;
        font-size: 12px;
        margin-left: 4px;
        cursor: pointer;
      }
      .resource-list li span {
        flex: 1;
        word-break: break-word;
      }
      .resource-inputs {
        display: flex;
        gap: 6px;
        margin-bottom: 10px;
      }
      .resource-inputs input[type="file"] {
        flex: 2;
      }
      .resource-inputs input[type="text"] {
        flex: 1;
      }
      .resource-inputs button {
        flex: 0;
      }
    </style>
  </head>
  <body>
    <select class="theme-select" id="themeDropdown" onchange="changeTheme()">
      <option value="dark">Dark</option>
      <option value="bright">Bright</option>
    </select>

    <div class="app" id="app">
      <h1>Study Planner</h1>
      <div class="subtitle">
        Plan your study, track tasks, and stay focused!
      </div>

      <!-- Task Input -->
      <div class="input-row">
        <input id="taskInput" placeholder="Study task" />
      </div>
      <div class="input-row">
        <div class="dropdown">
          <input
            id="subjectInput"
            placeholder="Choose or type subject"
            readonly
            onclick="toggleDropdown()"
          />
          <div class="dropdown-list" id="subjectList">
            <div onclick="selectSubject('Math')">Math</div>
            <div onclick="selectSubject('Science')">Science</div>
            <div onclick="selectSubject('English')">English</div>
            <div onclick="selectSubject('Computer')">Computer</div>
            <div onclick="selectSubject('Economics')">Economics</div>
            <div onclick="selectSubject('Account')">Account</div>
            <div onclick="selectSubject('Other Subject')">Other Subject</div>
          </div>
        </div>
        <input id="timeInput" type="number" placeholder="Minutes" />
      </div>
      <div class="input-row">
        <button onclick="addTask()">Add Task</button>
      </div>
      <ul id="taskList"></ul>

      <!-- Resource Section -->
      <div class="resource-section">
        <h2>Resources</h2>
        <div class="resource-inputs">
          <input type="text" id="noteInput" placeholder="Add note" />
          <button onclick="addNote()">Add Note</button>
        </div>
        <div class="resource-inputs">
          <input type="file" id="fileInput" />
          <button onclick="addFile()">Upload File</button>
        </div>
        <ul class="resource-list" id="resourceList"></ul>
      </div>

      <div class="footer">Deep focus builds toppers</div>
    </div>

    <audio
      id="beepSound"
      src="https://www.soundjay.com/button/beep-07.wav"
      preload="auto"
    ></audio>

    <script>
      // Theme Logic
      let theme = "dark";
      window.onload = function () {
        document.getElementById("themeDropdown").value = theme;
        applyTheme(theme);
      };
      function changeTheme() {
        theme = document.getElementById("themeDropdown").value;
        applyTheme(theme);
      }
      function applyTheme(theme) {
        const body = document.body,
          app = document.getElementById("app");
        if (theme === "dark") {
          body.style.background = "linear-gradient(135deg,#020617,#0f172a)";
          body.style.color = "#e5e7eb";
          app.style.background = "rgba(255,255,255,0.08)";
          app.style.color = "#e5e7eb";
          app.style.border = "1px solid rgba(255,255,255,0.15)";
          document.querySelectorAll("input").forEach((i) => {
            i.style.background = "rgba(0,0,0,.4)";
            i.style.color = "#e5e7eb";
            i.style.border = "1px solid rgba(255,255,255,0.15)";
          });
          document.querySelectorAll("ul, .dropdown-list").forEach((s) => {
            s.style.background = "rgba(0,0,0,0.6)";
          });
          document.querySelector(".footer").style.color = "#94a3b8";
          document.querySelector(".subtitle").style.color = "#94a3b8";
        } else {
          body.style.background = "#f3f4f6";
          body.style.color = "#111827";
          app.style.background = "rgba(255,255,255,0.95)";
          app.style.color = "#111827";
          app.style.border = "1px solid rgba(0,0,0,0.1)";
          document.querySelectorAll("input").forEach((i) => {
            i.style.background = "rgba(255,255,255,0.9)";
            i.style.color = "#111827";
            i.style.border = "1px solid rgba(0,0,0,0.1)";
          });
          document.querySelectorAll("ul, .dropdown-list").forEach((s) => {
            s.style.background = "rgba(255,255,255,0.9)";
          });
          document.querySelector(".footer").style.color = "#6b7280";
          document.querySelector(".subtitle").style.color = "#6b7280";
        }
      }

      // Task Logic
      const taskList = document.getElementById("taskList");
      const taskInput = document.getElementById("taskInput");
      const subjectInput = document.getElementById("subjectInput");
      const subjectList = document.getElementById("subjectList");
      const timeInput = document.getElementById("timeInput");
      const beep = document.getElementById("beepSound");
      let tasks = JSON.parse(localStorage.getItem("studyTasks")) || [];
      let activeTimer = null;

      function toggleDropdown() {
        subjectList.classList.toggle("show");
      }
      function selectSubject(value) {
        subjectInput.value = value;
        subjectList.classList.remove("show");
        if (value === "Other Subject") {
          subjectInput.readOnly = false;
          subjectInput.value = "";
          subjectInput.focus();
        } else {
          subjectInput.readOnly = true;
        }
      }
      function saveTasks() {
        localStorage.setItem("studyTasks", JSON.stringify(tasks));
      }
      function formatTime(sec) {
        const m = Math.floor(sec / 60);
        const s = sec % 60;
        return `${m}:${s.toString().padStart(2, "0")}`;
      }
      function renderTasks() {
        taskList.innerHTML = "";
        tasks.forEach((t, i) => {
          const li = document.createElement("li");
          li.innerHTML = `<div class="task-top"><div><strong>${
            t.text
          }</strong><br><span class="subject">${
            t.subject
          }</span></div><div class="actions"><button class="start" onclick="startTimer(${i})">‚ñ∂</button><button class="pause" onclick="pauseTimer(${i})">‚è∏</button><button class="delete" onclick="removeTask(${i})">‚úï</button></div></div><div class="timer">‚è± ${formatTime(
            t.remaining
          )}</div>`;
          taskList.appendChild(li);
        });
      }
      function addTask() {
        if (!taskInput.value || !timeInput.value) return;
        const subjectVal = subjectInput.value.trim() || "Other Subject";
        const minutes = parseInt(timeInput.value);
        tasks.push({
          text: taskInput.value,
          subject: subjectVal,
          remaining: minutes * 60,
        });
        taskInput.value = "";
        timeInput.value = "";
        subjectInput.value = "";
        subjectInput.readOnly = true;
        saveTasks();
        renderTasks();
      }
      function startTimer(i) {
        if (activeTimer) return;
        activeTimer = setInterval(() => {
          if (tasks[i].remaining > 0) {
            tasks[i].remaining--;
            saveTasks();
            renderTasks();
          } else {
            clearInterval(activeTimer);
            activeTimer = null;
            beep.play();
            alert("‚è∞ Time completed: " + tasks[i].text);
          }
        }, 1000);
      }
      function pauseTimer() {
        clearInterval(activeTimer);
        activeTimer = null;
      }
      function removeTask(i) {
        tasks.splice(i, 1);
        saveTasks();
        renderTasks();
      }
      renderTasks();

      // Resource Logic
      const resourceList = document.getElementById("resourceList");
      let resources = JSON.parse(localStorage.getItem("studyResources")) || [];
      function renderResources() {
        resourceList.innerHTML = "";
        resources.forEach((r, i) => {
          const li = document.createElement("li");
          li.innerHTML = `<span>${r.typeIcon} ${r.name}</span><div>${
            r.type === "note"
              ? `<button onclick="viewNote(${i})">View</button>`
              : `<button onclick="openFile(${i})">Open</button>`
          }<button onclick="deleteResource(${i})">Delete</button></div>`;
          resourceList.appendChild(li);
        });
      }
      function addNote() {
        const note = document.getElementById("noteInput").value.trim();
        if (!note) return;
        resources.push({
          type: "note",
          name: note,
          typeIcon: "üìù",
          content: note,
        });
        document.getElementById("noteInput").value = "";
        saveResources();
        renderResources();
      }
      function addFile() {
        const fileInput = document.getElementById("fileInput");
        if (fileInput.files.length === 0) return;
        const file = fileInput.files[0];
        const reader = new FileReader();
        reader.onload = function (e) {
          resources.push({
            type: file.type.startsWith("image")
              ? "image"
              : file.type.startsWith("video")
              ? "video"
              : "file",
            name: file.name,
            typeIcon: file.type.startsWith("image")
              ? "üñºÔ∏è"
              : file.type.startsWith("video")
              ? "üé•"
              : "üìÑ",
            content: e.target.result,
          });
          saveResources();
          renderResources();
        };
        reader.readAsDataURL(file);
        fileInput.value = "";
      }
      function saveResources() {
        localStorage.setItem("studyResources", JSON.stringify(resources));
      }
      function deleteResource(i) {
        resources.splice(i, 1);
        saveResources();
        renderResources();
      }
      function viewNote(i) {
        alert(resources[i].content);
      }
      function openFile(i) {
        const r = resources[i];
        if (r.type === "image" || r.type === "video") {
          const w = window.open("");
          if (r.type === "image")
            w.document.write(`<img src="${r.content}" style="max-width:100%">`);
          else
            w.document.write(
              `<video src="${r.content}" controls style="max-width:100%"></video>`
            );
        } else {
          const w = window.open("");
          w.document.write(
            `<iframe src="${r.content}" style="width:100%;height:100%"></iframe>`
          );
        }
      }
      renderResources();

      // Flowers
      const flowers = ["üå∏", "üåº", "üå∫", "üå∑"];
      setInterval(() => {
        const f = document.createElement("div");
        f.className = "flower";
        f.textContent = flowers[Math.floor(Math.random() * flowers.length)];
        f.style.left = Math.random() * 100 + "vw";
        f.style.fontSize = 14 + Math.random() * 14 + "px";
        f.style.animationDuration = 6 + Math.random() * 5 + "s";
        document.body.appendChild(f);
        setTimeout(() => f.remove(), 10000);
      }, 500);
    </script>
  </body>
</html>
